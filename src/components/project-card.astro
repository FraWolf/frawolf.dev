---
import { ExternalLink } from "@lucide/astro";
import type { IProject } from "../schemas/content";
import Pill from "./pill.astro";
import { tw } from "../utils/merge";

type Props = IProject;

const { name, description, link, technologies, discontinued } = Astro.props;
---

<div
  class={tw(
    "group bg-card border rounded-lg p-5 hover:border-primary/50 transition-colors relative border-border",
    { "border-yellow-500/50": discontinued }
  )}
>
  {
    discontinued && (
      <span class="absolute top-3 left-3 text-xs px-2 py-1 rounded-md bg-yellow-500/10 text-yellow-500 border border-yellow-500/30">
        Discontinued
      </span>
    )
  }

  <div
    class={tw("flex items-start justify-between gap-4 mb-3", {
      "pt-6": discontinued,
    })}
  >
    <div class="flex-1">
      <h3
        class="text-lg font-semibold group-hover:text-primary transition-colors"
      >
        {name}
      </h3>
      <!-- {
        linkPreview && (
          <p class="text-xs text-muted-foreground/70 mt-1">{linkPreview}</p>
        )
      } -->
    </div>

    {
      !!link && (
        <a
          href={link}
          target="_blank"
          rel="noopener noreferrer"
          class="text-muted-foreground hover:text-primary transition-colors flex-shrink-0"
          aria-label={`View ${name} project`}
        >
          <ExternalLink class="h-4 w-4" />
        </a>
      )
    }
  </div>
  <p class="text-sm text-muted-foreground leading-relaxed mb-4">
    {description}
  </p>
  <div class="flex flex-wrap gap-2">
    {
      technologies.map((tech) => {
        return <Pill name={tech} />;
      })
    }
  </div>
</div>
