---
import { getCollection } from "astro:content";
import ProjectCard from "./project-card.astro";

const totalProjectsPerView = 6;

const projects = (await getCollection("projects"))
  .slice(0, totalProjectsPerView)
  ?.map((project) => {
    return project.data;
  });
---

<section class="container mx-auto px-4 py-8">
  <div class="mx-auto max-w-6xl">
    <div class="mb-6 flex items-center justify-between">
      <h2 class="text-2xl font-bold">Projects</h2>
      <a
        href="/projects"
        class="text-primary text-sm hover:underline"
        data-astro-prefetch
      >
        View all â†’
      </a>
    </div>

    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {
        projects.map((project) => {
          return <ProjectCard {...project} />;
        })
      }
    </div>
  </div>
</section>
